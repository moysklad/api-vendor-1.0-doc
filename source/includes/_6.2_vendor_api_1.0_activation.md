### Процесс активации решения на аккаунте

Активация решения — это процесс включения решения для конкретного аккаунта в системе разработчика. Выполняется при подключении решения пользователем или при возобновлении платного решения. В рамках активации происходит оповещение сервера разработчика со стороны МоегоСклада.

В общем виде процесс активации решения выглядит так:

1. Пользователь МоегоСклада устанавливает решение. 
2. МойСклад делает HTTP PUT запрос на сервер разработчика, в том числе передавая причину активации и токен доступа к JSON API, если в дескрипторе решения такой доступ запрашивается. При этом доступ по переданному токену уже работает.
3. Сервер разработчика в рамках допустимого тайм-аута отвечает на запрос одним из статусов в теле ответа:
    + **Activating** — статус предназначен для асинхронной активации на стороне разработчика — если в рамках 
    допустимого тайм-аута обработки HTTP PUT запроса не получается активировать решение. Например, для активации 
    решения требуется несколько минут. Далее разработчик должен оповестить МойСклад через эндпоинт **Изменение статуса решения на аккаунте** о завершении активации решения статусом **Activated** или о том, что 
    решению требуется настройка статусом **SettingsRequired**.
    + **SettingsRequired** — статусом, с помощью которого разработчик сообщает МоемуСкладу, что решению требуется настройка пользователем через iframe-часть решения. После того, как пользователь настроит решение, разработчик должен оповестить МойСклад через эндпоинт **Обратного вызова изменения статуса решения на аккаунте** об активации решения, передав статус **Activated**.
    + **Activated** — статус означает, что решение сразу было полностью активировано и уже работает.

Диаграмма деятельности активации решения:

![useful image](diag_activate.png)

### Процесс деактивации решения на аккаунте

Деактивация решения — это процесс выключения решения для конкретного аккаунта в системе разработчика. Выполняется при отключении решения пользователем или при приостановке платного решения. При деактивации происходит оповещение сервера разработчика со стороны МоегоСклада.

Процесс деактивации решения гораздо проще процесса активации:

1. Пользователь МоегоСклада нажимает на кнопку **Удалить** в карточке решения.
    + **Для платных решений возможна приостановка в случаях:** 
        + У пользователя, на аккаунте которого есть установленные платные решения, кончается подписка.
        + Пользователь, на аккаунте которого есть установленные платные решения, оплачивает подписку меньшей суммой, чем требуется для оплаты установленных платных решений.        
2. МойСклад аннулирует доступ по токену, если он был выдан, и выполняет HTTP DELETE запрос с причиной деактивации к серверу разработчика. На момент получения разработчиком оповещения по деактивации доступ по токену уже не работает.

Диаграмма деятельности деактивации решения:

![useful image](diag_deactivate.png)

### Процесс приостановки и возобновления работы решения на аккаунте

Приостановка решения — это автоматический процесс выключения платного решения при отсутствии на счету пользователя
МоегоСклада суммы, необходимой для оплаты подписки. После
приостановки [токен доступа решения](#dostup-po-tokenu-k-json-api) аннулируется. Первыми приостанавливаются последние
установленные решения на аккаунте.

Возобновление решения — это процесс включения приостановленного платного решения.
Возобновление может быть выполнено:

- автоматически после пополнения баланса, если в решении включено автопродление
- вручную пользователем МоегоСклада, если в решении выключено автопродление

После возобновления решению выдается новый [токен доступа](#dostup-po-tokenu-k-json-api). Первыми возобновляются
решения, установленные ранее других решений.



