## Руководство разработчика 

### Доступ по токену к JSON API 

Токен для доступа к JSON API 1.2 передается разработчику при активации приложения через Vendor API в момент установки или 
возобновления приложения. Время жизни токена не ограничено. 

Токен аннулируется при удалении и приостановке приложения. На момент деактивации приложения через Vendor API токен уже аннулирован.

Токен при доступе к JSON API 1.2 следует передавать как [Bearer-токен](https://dev.moysklad.ru/doc/api/remap/1.2/#mojsklad-json-api-obschie-swedeniq-autentifikaciq),
 а именно в виде заголовка HTTP-запроса:
 
 ```text
Authorization: Bearer <access_token>
 ```

Пример:

```text
Authorization: Bearer 6ab89be1ae6ff147755625ee8da948e42612233b
```

#### Диаграмма последовательности предоставления доступа при подключении приложения

![useful image](diag_install.png)

#### Диаграмма последовательности отзыва доступа при отключении приложения

![useful image](diag_uninstall.png)


### Работа с вебхуками

Для работы с вебхуками в дескрипторе нужно указать одно из специальных прав доступа: `<useOwnWebhooks/>` или `<useAllWebhooks/>`.

Для большинства приложений достаточно **useOwnWebhooks**. Такое приложение сможет создавать, изменять и удалять свои вебхуки, а также просматривать вебхуки созданные другими приложениями.
Если приложению требуется возможность изменять и удалять вебхуки других приложений, используйте **useAllWebhooks**. 
Нельзя указать сразу оба этих права. 

Подробнее про работу с правами приложений можно ознакомиться в разделе **Блок access** [дескриптора](#deskriptor-prilozheniq).

Если приложение создает один или несколько вебхуков на аккаунте пользователя, то необходимо учитывать:

- Вебхуки доступны только на пробном и платных тарифах.
- Если пользователь инициирует удаление приложения, перед тем как удалить приложение, МойСклад удаляет все вебхуки, созданные этим приложением для данного аккаунта.
- Перед приостановкой платного приложения все вебхуки для данного аккаунта будут отключены, а после возобновления — включены. 

Подробную информацию о работе с вебхуками по JSON API можно получить по [ссылке](https://dev.moysklad.ru/doc/api/remap/1.2/dictionaries/#suschnosti-vebhuki). 

### Особенности доступа к некоторым функциям JSON API 1.2

На данный момент для приложений существуют ограничения в работе с JSON API 1.2:

* Приложение не может получать [Информацию о действующей подписке компании](https://dev.moysklad.ru/doc/api/remap/1.2/dictionaries/#suschnosti-podpiska-kompanii).
* Приложение не может создавать [Бонусные операции](https://dev.moysklad.ru/doc/api/remap/1.2/dictionaries/#suschnosti-bonusnaq-operaciq).
* Приложение может использовать [Шаблоны документов](https://dev.moysklad.ru/doc/api/remap/1.2/documents/#dokumenty-obschie-swedeniq-shablony-dokumentow), но получаемый шаблон или шаблон на основании документа, имеет меньший набор предзаполненных полей чем шаблон полученный по авторизации пользователя.

Подробнее о том, как работать с API МоегоСклада, смотрите в [видео](https://www.youtube.com/watch?v=eQWNADSRSWA).
