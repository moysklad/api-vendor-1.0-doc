## Быстрый старт

### Как создать и опубликовать приложение 

Для магазина приложений МоегоСклада можно создать приложение на любом языке программирования, с использованием любых фреймворков. Допустимые типы приложений: [серверные приложения](#serwernye-prilozheniq), [телефония](#telefoniq), [приложения лояльности](#prilozheniq-loql-nosti). 

Каждый тип приложений подключается к МоемуСкладу с помощью своего API: серверные приложения используют [JSON API 1.2](https://dev.moysklad.ru/doc/api/remap/1.2), приложения телефонии — [Phone API 1.0](https://dev.moysklad.ru/doc/api/phone/1.0/), приложения лояльности — [Loyalty API](https://dev.moysklad.ru/doc/api/loyalty/1.0/#scenarij-raboty). 

Процесс создания приложений телефонии и лояльности описан в [Сценарии работы с Phone API 1.0](https://dev.moysklad.ru/doc/api/phone/1.0/#%D1%81%D1%86%D0%B5%D0%BD%D0%B0%D1%80%D0%B8%D0%B9-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B) и [Сценарии работы с LoyaltyAPI](https://dev.moysklad.ru/doc/api/loyalty/1.0/#scenarij-raboty). Пошаговый процесс создания серверных приложений рассмотрим ниже.

1. Определите, к какому [типу](#tipy-prilozhenij-dlq-magazina-prilozhenij) относится приложение. 

2. Создайте бизнес-логику приложения на сервере.

3. Создайте черновик приложения в [личном кабинете вендора](#lichnyj-kabinet-wendora), используя один из примеров [дескриптора](#deskriptor-prilozheniq). После создания черновика вы получите appId, appUid, secret key, необходимые для работы с Vendor API.

4. Реализуйте эндпоинты согласно спецификации [Vendor API 1.0](#vendor-api-1-0), чтобы обрабатывать [события](#rest-andpointy-na-storone-wendora-prilozhenij) приложения. При установке и возобновлении приложения МойСклад передает [токен для доступа](#dostup-po-tokenu-k-json-api) к [JSON API 1.2](https://dev.moysklad.ru/doc/api/remap/1.2).

5. Если пользователь должен будет настраивать приложение при его установке на аккаунт, реализуйте iframe-часть приложения. Обновите [дескриптор](#deskriptor-prilozheniq) в черновике, добавив тег `iframe`. По возможности используйте UI Kit МоегоСклада.

6. Если в iframe-части серверного приложения будет какая-либо пользовательская функциональность кроме настроек, предусмотрите доступ к этой функциональности для пользователей с разными правами доступа (не только правами администратора).

7. Если в приложении нужны дополнительные поля для сущностей и/или документов, создайте их через JSON API 1.2 в рамках [активации приложения](#process-aktiwacii-prilozheniq-na-akkaunte). Если при этом процесс создания занимает много времени (более одной минуты) — используйте асинхронную активацию с возвратом статуса Activating.

8. Если приложение нужно встроить в интерфейс МоегоСклада, создайте виджет приложения. Для этого нужно реализовать iframe-часть виджета и обновить [дескриптор](#deskriptor-prilozheniq), добавив тег `widgets`. Подробнее читайте в разделе [Виджеты](#vidzhety). 

9. [Разместите](#uslowiq-razmescheniq-i-oplaty-prilozhenij) приложение в магазине приложений.

### Демо-приложение

Для демонстрации взаимодействия приложений с магазином приложений МоегоСклада было создано демо-приложение на PHP.

В демо-приложении реализованы следующие функции:

* Активация (с получением токена доступа к JSON API 1.2) и деактивация по Vendor API.
* Использование основной iframe-части для настройки приложения администратором аккаунта с обновлением статуса в магазине приложений.
* Получение контекста пользователя для iframe (отображение информации по пользователю, проверка прав администратора).
* Получение информации из МоегоСклада по JSON API 1.2 с доступом по токену.

Более подробная информация и исходный код приложения доступны по [ссылке](https://github.com/moysklad/php-dummyapp-marketplace-1.0).
