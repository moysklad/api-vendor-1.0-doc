### Уведомления о дополнительных событиях

Есть возможность получать дополнительные события о действиях с приложением со стороны пользователя.  

Поддержку таких событий необходимо явно объявлять в дескрипторе, см. [Блок дополнительных событий](#blok-dopolnitel-nyh-sobytij)

#### Событие изменения прав установки (updatePermissions)

Получение обновлённых прав установки от МоегоСклада, когда права для токена у пользователя изменены.

Права для токена обновляются в случаях:

* Модератор публикует следующую версию вашего приложения с новым набором прав, пользователь подтверждает изменение (основной сценарий)
* При принудительном обновлении токена силами МоегоСклада (используется только в экстренных случаях)

Чтобы получать событие, нужно выполнить 2 условия:

1. Объявить о поддержке события `updatePermissions` через дескриптор, см. [блок additionalEvents в дескрипторе](#blok-dopolnitel-nyh-sobytij)
2. Реализовать на сервере разработчика эндпоинт по адресу  
   `https://{endpointBase}/api/vendor/1.0/apps/{appId}/{accountId}/event`

МойСклад отправит на эндпоинт **PUT** запрос аналогичный запросу активации решения с блоком permissions.

Обратите внимание - поле `subscription` и `access_token` в этом случае не заполняются.

> Пример события при изменении набора прав:

> **Request:**

> **PUT**
> https://example.com/dummy-app/api/moysklad/vendor/1.0/apps/5f3c5489-6a17-48b7-9fe5-b2000eb807fe/f088b0a7-9490-4a57-b804-393163e7680f/event

> Body

```json
{
  "appUid": "example-app.example-vendor",
  "accountName": "account-test",
  "access": [
    {
      "resource": "https://api.moysklad.ru/api/remap/1.2",
      "scope": ["custom"],
      "permissions": {
        "supply": {
          "view": "ALL",
          "update": "ALL"
        },
        "viewDashboard": true,
        "viewAudit": true
      }
    }
  ],
  "cause": "PermissionsChanged"
}
```
> ---

> **Response:**

> Response 200

> Content-Type: **application/json**

> Body:

```json
{}
```
