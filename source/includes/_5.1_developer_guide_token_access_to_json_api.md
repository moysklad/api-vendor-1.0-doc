## Руководство разработчика 

### Доступ по токену к JSON API 

Токен для доступа к JSON API 1.2 передается разработчику при активации решения через Vendor API в момент установки или 
возобновления решения. Время жизни токена не ограничено. 

Токен аннулируется при удалении и приостановке решения. На момент деактивации решения через Vendor API токен уже аннулирован.

Токен при доступе к JSON API 1.2 следует передавать как [Bearer-токен](https://dev.moysklad.ru/doc/api/remap/1.2/#mojsklad-json-api-obschie-swedeniq-autentifikaciq),
 а именно в виде заголовка HTTP-запроса:
 
 ```text
Authorization: Bearer <access_token>
 ```

Пример:

```text
Authorization: Bearer 6ab89be1ae6ff147755625ee8da948e42612233b
```

#### Диаграмма последовательности предоставления доступа при подключении решения

![useful image](diag_install.png)

#### Диаграмма последовательности отзыва доступа при отключении решения

![useful image](diag_uninstall.png)


### Работа с вебхуками

Для работы с вебхуками в дескрипторе нужно указать одно из специальных прав доступа: `<useOwnWebhooks/>` или `<useAllWebhooks/>`.

Для большинства решений достаточно **useOwnWebhooks**. Такое решение сможет создавать, изменять и удалять свои вебхуки, а также просматривать вебхуки созданные другими решениями.
Если решению требуется возможность изменять и удалять вебхуки других решений, используйте **useAllWebhooks**. 
Нельзя указать сразу оба этих права. 

Подробнее про работу с правами решений можно ознакомиться в разделе **Блок access** [дескриптора](#deskriptor-resheniq).

Если решение создает один или несколько вебхуков на аккаунте пользователя, то необходимо учитывать:

- Вебхуки доступны только на пробном и платных тарифах.
- Если пользователь инициирует удаление решения, перед тем как удалить решение, МойСклад удаляет все вебхуки, созданные этим решением для данного аккаунта.
- Перед приостановкой платного решения все вебхуки для данного аккаунта будут отключены, а после возобновления — включены. 

Подробную информацию о работе с вебхуками по JSON API можно получить по [ссылке](https://dev.moysklad.ru/doc/api/remap/1.2/dictionaries/#suschnosti-vebhuki). 

### Особенности доступа к некоторым функциям JSON API 1.2

На данный момент для решений существуют ограничения в работе с JSON API 1.2:

* Решение не может получать [Информацию о действующей подписке компании](https://dev.moysklad.ru/doc/api/remap/1.2/dictionaries/#suschnosti-podpiska-kompanii).
* Решение не может создавать [Бонусные операции](https://dev.moysklad.ru/doc/api/remap/1.2/dictionaries/#suschnosti-bonusnaq-operaciq).
* Решение может использовать [Шаблоны документов](https://dev.moysklad.ru/doc/api/remap/1.2/documents/#dokumenty-obschie-swedeniq-shablony-dokumentow), но получаемый шаблон или шаблон на основании документа, имеет меньший набор предзаполненных полей чем шаблон полученный по авторизации пользователя.

Подробнее о том, как работать с API МоегоСклада, смотрите в [видео](https://www.youtube.com/watch?v=eQWNADSRSWA).
